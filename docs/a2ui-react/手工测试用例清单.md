# A2UI React H5 移动端 - 手工测试用例清单

## 测试环境

| 环境类型 | 测试设备/浏览器 | 版本要求 | 说明 |
|---------|---------------|---------|------|
| 纯 H5（浏览器） | Chrome / Safari / Edge | 最新版 | **独立运行**，无需原生 App |
| iOS 模拟器 | Xcode iOS Simulator | iOS 14+ | 需要构建 OpenClaw iOS App |
| iOS 真机 | iPhone | iOS 14+ | 需要安装 OpenClaw iOS App |
| Android 模拟器 | Android Emulator | Android 8+ | 需要构建 OpenClaw Android App |
| Android 真机 | Android 手机 | Android 8+ | 需要安装 OpenClaw Android App |
| 开发环境 | localhost:18789 | Vite dev server | 前端开发，独立运行 |

### 运行模式说明

#### 纯 H5 模式（浏览器）- 推荐用于前端开发

```bash
# 启动开发服务器（无需 gateway，无需原生 App）
npm run a2ui:react:dev

# 访问 http://localhost:18789
```

**特点**：
- ✅ 完全独立运行
- ✅ 热更新（HMR）
- ✅ 内置 Demo 消息自动展示
- ⚠️ 点击按钮会尝试调用 `/api/a2ui/action`（可能 404，不影响 UI 测试）

#### iOS/Android WebView 模式 - 端到端测试

```bash
# 1. 构建 H5 生产版本
npm run a2ui:react:build

# 2. 在原生 App 中加载
# iOS: WKWebView 加载 dist/a2ui-react/index.html
# Android: WebView 加载 dist/a2ui-react/index.html

# 3. 桥接通信
# H5 调用 webkit.messageHandlers.openclawCanvasA2UIAction.postMessage
# 原生代码接收并处理动作
```

**特点**：
- 需要原生 App 环境
- 测试桥接通信
- 测试端到端流程

---

## 一、基础功能测试

### 1.1 页面加载测试

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-001 | 页面访问 | 访问 `http://localhost:18789/__openclaw__/a2ui/react` | 正常加载页面，显示空状态提示 | P0 |
| TC-002 | 构建版本加载 | 运行 `pnpm a2ui:react:build` 后访问 | 显示已构建的 React 应用 | P0 |
| TC-003 | 缺少构建时提示 | 删除 `dist/a2ui-react/` 后访问 | 显示友好错误提示页面 | P1 |

### 1.2 桥接通信测试

> **重要说明**：桥接通信测试需要原生 App 环境（iOS/Android），纯浏览器模式下桥接对象不存在。

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 测试环境 | 优先级 |
|--------|--------|---------|---------|---------|--------|
| TC-101 | iOS 桥接初始化 | iOS 模拟器/真机访问，控制台执行 `window.webkit?.messageHandlers?.openclawCanvasA2UIAction` | 返回桥接对象 | iOS WebView | P0 |
| TC-102 | Android 桥接初始化 | Android 模拟器/真机访问，控制台执行 `window.openclawCanvasA2UIAction` | 返回桥接对象 | Android WebView | P0 |
| TC-103 | 纯 H5 模式降级 | 桌面浏览器访问，控制台执行 `window.openclawA2UI` | API 存在，但桥接对象为 null | 浏览器 | P0 |
| TC-104 | 全局 API 可用性 | 在任意环境控制台执行 `window.openclawA2UI` | 返回包含 `applyMessages`, `reset`, `getSurfaces` 的对象 | 任意 | P0 |
| TC-105 | iOS 动作发送 | iOS 环境点击按钮，观察 Swift 代码 `onA2UIAction` 回调 | Swift 收到 `userAction` | iOS WebView | P0 |
| TC-106 | Android 动作发送 | Android 环境点击按钮，观察 Kotlin 日志 | Kotlin 收到 `userAction` | Android WebView | P0 |
| TC-107 | 纯 H5 动作发送 | 浏览器点击按钮，观察网络请求 | 发送 POST 到 `/api/a2ui/action` | 浏览器 | P1 |

#### 测试环境准备

**iOS 测试**：
```bash
# 1. 构建 H5 生产版本
npm run a2ui:react:build

# 2. 构建 iOS App
cd apps/ios && xcodebuild -scheme OpenClaw -sdk iphonesimulator

# 3. 运行模拟器
# 打开 Xcode，运行 OpenClaw App
# App 会自动加载 H5 页面
```

**Android 测试**：
```bash
# 1. 构建 H5 生产版本
npm run a2ui:react:build

# 2. 构建 Android App
cd apps/android && ./gradlew assembleDebug

# 3. 安装到模拟器/真机
adb install app/build/outputs/apk/debug/app-debug.apk
```

#### 桥接通信原理

```
┌────────────────────────────────────────────────────────────┐
│  纯 H5 模式（浏览器）                                       │
│  ┌──────────────────────────────────────────────────────┐  │
│  │  点击按钮 → POST /api/a2ui/action → 后端处理          │  │
│  └──────────────────────────────────────────────────────┘  │
└────────────────────────────────────────────────────────────┘

┌────────────────────────────────────────────────────────────┐
│  iOS WebView 模式                                           │
│  ┌──────────────────────────────────────────────────────┐  │
│  │  点击按钮                                              │  │
│  │    ↓                                                   │  │
│  │  webKit.messageHandlers                               │  │
│  │    .openclawCanvasA2UIAction.postMessage              │  │
│  │    ↓                                                   │  │
│  │  Swift: CanvasA2UIActionMessageHandler                │  │
│  │    .userContentController(didReceive:)                │  │
│  │    ↓                                                   │  │
│  │  Swift: controller.onA2UIAction?(body)                │  │
│  └──────────────────────────────────────────────────────┘  │
└────────────────────────────────────────────────────────────┘
```

---

## 二、A2UI 组件测试

### 2.1 基础组件（7个核心组件）

#### Button 组件

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-201 | 按钮渲染 | 发送包含 Button 的消息 | 按钮正确显示，文本内容正确 | P0 |
| TC-202 | 按钮点击 | 点击按钮 | 触发 `sendUserAction`，桥接发送消息 | P0 |
| TC-203 | 按钮禁用状态 | 设置 `disabled: true` | 按钮置灰，点击无响应 | P1 |
| TC-204 | 按钮加载状态 | 设置 `isLoading: true` | 显示 loading 动画，不可点击 | P1 |
| TC-205 | iOS 按钮样式 | iOS 设备查看按钮 | 显示 iOS 风格阴影和圆角 | P1 |
| TC-206 | Android 按钮样式 | Android 设备查看按钮 | 显示 Android 风格阴影和圆角 | P1 |

#### Text 组件

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-210 | 文本渲染 | 发送包含 Text 的消息 | 文本正确显示 | P0 |
| TC-211 | 文本大小 | 设置 `size: 'xlarge'` | 文本显示为大号字体 | P1 |
| TC-212 | 文本粗细 | 设置 `weight: 'bold'` | 文本显示为粗体 | P1 |
| TC-213 | 文本颜色 | 设置 `color: '#ff0000'` | 文本显示为红色 | P1 |
| TC-214 | 长文本换行 | 发送超长文本 | 文本自动换行，不溢出 | P1 |

#### Card 组件

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-220 | 卡片渲染 | 发送包含 Card 的消息 | 卡片正确显示，背景色正确 | P0 |
| TC-221 | 卡片嵌套 | Card 内嵌套其他组件 | 子组件正确显示在卡片内 | P1 |
| TC-222 | 多个卡片 | 发送多个 Card | 所有卡片正确显示，间距合理 | P1 |

#### Column 组件（垂直布局）

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-230 | 垂直布局 | 发送 Column 包含多个子组件 | 子组件垂直排列 | P0 |
| TC-231 | 居中对齐 | 设置 `alignment: 'center'` | 子组件居中对齐 | P1 |
| TC-232 | 间距设置 | 设置 `spacing: { literalNumber: 24 }` | 子组件间距为 24px | P1 |

#### Row 组件（水平布局）

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-240 | 水平布局 | 发送 Row 包含多个子组件 | 子组件水平排列 | P0 |
| TC-241 | 居中对齐 | 设置 `alignment: 'center'` | 子组件垂直居中 | P1 |
| TC-242 | 间距设置 | 设置 `spacing: { literalNumber: 16 }` | 子组件间距为 16px | P1 |

#### Image 组件

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-250 | 图片渲染 | 发送包含 Image 的消息（URL） | 图片正确加载显示 | P0 |
| TC-251 | Base64 图片 | 发送 Base64 编码图片 | 图片正确显示 | P1 |
| TC-252 | 图片加载失败 | 发送无效 URL | 显示占位符或错误状态 | P1 |
| TC-253 | 图片缩放 | 设置 `width: '100%'` | 图片自适应宽度 | P1 |

#### TextField 组件

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-260 | 输入框渲染 | 发送包含 TextField 的消息 | 输入框正确显示 | P0 |
| TC-261 | 文本输入 | 在输入框中输入文本 | 文本正常显示 | P0 |
| TC-262 | 占位符 | 设置 `placeholder: '请输入'` | 显示占位符文本 | P1 |
| TC-263 | 最大长度 | 设置 `maxLength: 10` | 最多输入 10 个字符 | P1 |
| TC-264 | 只读模式 | 设置 `readonly: true` | 无法编辑，但可选择文本 | P1 |

### 2.2 高级组件（7个）

#### Divider 组件

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-270 | 分割线渲染 | 发送包含 Divider 的消息 | 分割线正确显示 | P1 |
| TC-271 | 分割线颜色 | 设置 `color: '#06b6d4'` | 分割线显示为主题色 | P2 |

#### Container 组件

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-280 | 容器渲染 | 发送包含 Container 的消息 | 容器正确显示 | P1 |
| TC-281 | 容器内边距 | 设置 `padding: 16` | 内容有内边距 | P2 |

#### Progress 组件

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-290 | 进度条渲染 | 发送包含 Progress 的消息 | 进度条正确显示 | P1 |
| TC-291 | 进度更新 | 发送 `dataModelUpdate` 更新进度值 | 进度条动画更新 | P1 |
| TC-292 | 进度百分比 | 设置 `value: 60, max: 100` | 显示 60% 进度 | P1 |

#### Modal 组件

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-300 | 模态框渲染 | 发送包含 Modal 的消息 | 模态框弹出显示 | P0 |
| TC-301 | ESC 关闭 | 按 ESC 键 | 模态框关闭 | P1 |
| TC-302 | 点击背景关闭 | 点击模态框外部背景 | 模态框关闭 | P1 |
| TC-303 | 模态框内容 | Modal 内嵌套其他组件 | 子组件正确显示 | P1 |

#### VideoPlayer 组件

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-310 | 视频播放器渲染 | 发送包含 VideoPlayer 的消息 | 播放器正确显示 | P1 |
| TC-311 | 播放视频 | 点击播放按钮 | 视频开始播放 | P1 |
| TC-312 | 暂停视频 | 点击暂停按钮 | 视频暂停播放 | P2 |

#### AudioPlayer 组件

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-320 | 音频播放器渲染 | 发送包含 AudioPlayer 的消息 | 播放器正确显示 | P1 |
| TC-321 | 播放音频 | 点击播放按钮 | 音频开始播放 | P1 |
| TC-322 | 暂停音频 | 点击暂停按钮 | 音频暂停播放 | P2 |

#### Markdown 组件

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-330 | Markdown 渲染 | 发送包含 Markdown 的消息 | Markdown 正确解析显示 | P1 |
| TC-331 | 代码块 | 发送包含代码块的 Markdown | 代码块正确高亮显示 | P2 |
| TC-332 | 图片链接 | Markdown 中包含图片链接 | 图片正确显示 | P2 |

---

## 三、主题系统测试

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-400 | 深色模式 | 设置主题为 `dark` | 界面显示深色主题 | P0 |
| TC-401 | 浅色模式 | 设置主题为 `light` | 界面显示浅色主题 | P1 |
| TC-402 | 自动主题 | 设置主题为 `auto`，切换系统主题 | 界面跟随系统主题变化 | P1 |
| TC-403 | 主题持久化 | 切换主题后刷新页面 | 主题设置保持不变 | P2 |

---

## 四、数据模型测试

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-500 | 数据模型设置 | 发送 `dataModelUpdate` 消息 | 数据模型正确存储 | P0 |
| TC-501 | 路径解析 | 组件使用 `{ path: 'user.name' }` | 正确解析显示数据模型值 | P0 |
| TC-502 | 嵌套路径 | 使用 `{ path: 'user.profile.age' }` | 正确解析嵌套值 | P1 |
| TC-503 | 数据更新 | 更新数据模型后发送 `surfaceUpdate` | UI 显示更新后的值 | P0 |
| TC-504 | 缺失路径 | 使用不存在的路径 | 显示空值或默认值 | P2 |

---

## 五、Surface 管理测试

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-600 | 创建 Surface | 发送 `createSurface` 消息 | Surface 创建成功 | P0 |
| TC-601 | 更新 Surface | 发送 `surfaceUpdate` 消息 | Surface 组件更新 | P0 |
| TC-602 | 删除 Surface | 发送 `deleteSurface` 消息 | Surface 被移除 | P0 |
| TC-603 | 多 Surface | 创建多个 Surface | 所有 Surface 正确显示 | P1 |
| TC-604 | 开始渲染 | 发送 `beginRendering` 消息 | 指定 root 组件开始渲染 | P0 |

---

## 六、用户动作测试

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-700 | 按钮点击动作 | 点击带 action 的按钮 | 发送 UserAction 到原生/后端 | P0 |
| TC-702 | 动作 ID 生成 | 触发任意动作 | UserAction 包含唯一 ID | P0 |
| TC-703 | 动作时间戳 | 触发动作 | UserAction 包含 ISO 8601 时间戳 | P0 |
| TC-704 | 动作上下文 | 发送带 context 的动作 | context 正确编码在动作中 | P1 |
| TC-705 | 动作状态事件 | 原生处理完成后发送状态 | 触发 `openclaw:a2ui-action-status` 事件 | P1 |

---

## 七、反馈组件测试

#### Toast 轻量提示

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-800 | 显示 Toast | 调用 `toast.show('消息')` | Toast 提示显示 | P1 |
| TC-801 | Toast 自动消失 | 等待 3 秒 | Toast 自动消失 | P1 |
| TC-802 | 多个 Toast | 连续显示多个 Toast | 多个 Toast 堆叠显示 | P2 |

#### Spinner 加载指示器

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-810 | 显示 Spinner | 调用 `spinner.show()` | 加载动画显示 | P1 |
| TC-811 | 隐藏 Spinner | 调用 `spinner.hide()` | 加载动画消失 | P1 |

#### Status 状态显示

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-820 | 显示成功状态 | 调用 `status.success('成功')` | 绿色成功提示显示 | P1 |
| TC-821 | 显示错误状态 | 调用 `status.error('错误')` | 红色错误提示显示 | P1 |

---

## 八、移动端适配测试

### 8.1 视口适配

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-900 | 竖屏显示 | 手机竖屏访问 | 界面正确显示，无横向滚动 | P0 |
| TC-901 | 横屏显示 | 手机横屏访问 | 界面正确适配 | P1 |
| TC-902 | 缩放禁用 | 双指缩放页面 | 页面无法缩放 | P1 |

### 8.2 安全区域适配（刘海屏）

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-910 | iPhone 刘海屏 | iPhone X+ 访问 | 内容不被刘海遮挡 | P0 |
| TC-911 | 底部安全区域 | iPhone Home Bar | 内容不被 Home Bar 遮挡 | P0 |

### 8.3 触摸优化

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-920 | 点击响应 | 点击按钮 | 响应迅速，无 300ms 延迟 | P0 |
| TC-921 | 触摸高亮 | 点击元素 | 无蓝色高亮背景 | P1 |
| TC-922 | 长按不选中文本 | 长按按钮 | 不弹出文本选择菜单 | P2 |

---

## 九、平台兼容性测试

### 9.1 iOS Safari

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-1000 | iOS 14 兼容性 | iOS 14 设备访问 | 功能正常 | P0 |
| TC-1001 | iOS 15 兼容性 | iOS 15 设备访问 | 功能正常 | P0 |
| TC-1002 | iOS 16 兼容性 | iOS 16 设备访问 | 功能正常 | P0 |
| TC-1003 | iOS 17 兼容性 | iOS 17 设备访问 | 功能正常 | P0 |

### 9.2 Android Chrome

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-1010 | Android 8 兼容性 | Android 8 设备访问 | 功能正常 | P0 |
| TC-1011 | Android 10 兼容性 | Android 10 设备访问 | 功能正常 | P0 |
| TC-1012 | Android 12 兼容性 | Android 12 设备访问 | 功能正常 | P0 |
| TC-1013 | Android 14 兼容性 | Android 14 设备访问 | 功能正常 | P0 |

### 9.3 微信/QQ 内置浏览器

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-1020 | 微信浏览器 | 微信内置浏览器访问 | 功能正常 | P1 |
| TC-1021 | QQ 浏览器 | QQ 内置浏览器访问 | 功能正常 | P2 |

---

## 十、性能测试

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-1100 | 首屏加载 | 刷新页面 | 首屏渲染 < 2 秒 | P1 |
| TC-1101 | 大量组件渲染 | 发送包含 100+ 组件的消息 | 渲染时间 < 1 秒 | P1 |
| TC-1102 | 频繁更新 | 连续发送 50 次 surfaceUpdate | 无卡顿，UI 响应流畅 | P1 |
| TC-1103 | 内存泄漏 | 长时间使用后检查内存 | 内存增长合理 | P2 |

---

## 十一、错误处理测试

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-1200 | 无效消息格式 | 发送格式错误的 A2UI 消息 | 显示错误提示，不崩溃 | P1 |
| TC-1201 | 桥接失败 | 模拟桥接通信失败 | 显示降级错误提示 | P1 |
| TC-1202 | 网络错误 | 纯 H5 模式下断网后发送动作 | 显示网络错误提示 | P2 |
| TC-1203 | 组件渲染错误 | 发送无法渲染的组件 | 显示占位符或错误状态 | P2 |

---

## 十二、全局 API 测试

| 用例ID | 测试项 | 操作步骤 | 预期结果 | 优先级 |
|--------|--------|---------|---------|--------|
| TC-1300 | applyMessages | 调用 `openclawA2UI.applyMessages([...])` | 返回 `{ ok: true, surfaces: [...] }` | P0 |
| TC-1301 | reset | 调用 `openclawA2UI.reset()` | 所有 Surface 被清空 | P0 |
| TC-1302 | getSurfaces | 调用 `openclawA2UI.getSurfaces()` | 返回 Surface ID 列表 | P0 |
| TC-1303 | OpenClaw.postMessage | 调用 `OpenClaw.postMessage(...)` | 消息发送到原生 | P0 |
| TC-1304 | OpenClaw.sendUserAction | 调用 `OpenClaw.sendUserAction(...)` | UserAction 发送到原生 | P0 |

---

## 测试执行记录模板

| 用例ID | 测试项 | 执行日期 | 执行人 | 测试结果 | 备注 |
|--------|--------|---------|--------|---------|------|
| TC-001 | 页面访问 | | | ✅/❌ | |
| TC-002 | 构建版本加载 | | | ✅/✅/❌ | |

---

## 优先级说明

- **P0**: 核心功能，必须通过
- **P1**: 重要功能，建议通过
- **P2**: 次要功能，可延后

---

## 测试数据示例

### Button 组件测试消息

```javascript
{
  "surfaceUpdate": {
    "surfaceId": "main",
    "components": [
      {
        "id": "root",
        "component": {
          "Column": {
            "children": { "explicitList": ["title", "button", "progress"] },
            "alignment": "center",
            "spacing": { "literalNumber": 24 }
          }
        }
      },
      {
        "id": "title",
        "component": {
          "Text": {
            "text": { "literalString": "A2UI React 测试" },
            "size": "xlarge",
            "weight": "bold"
          }
        }
      },
      {
        "id": "button",
        "component": {
          "Button": {
            "text": { "literalString": "点击测试" },
            "action": {
              "name": "test_click",
              "surfaceId": "main",
              "context": [
                { "key": "source", "value": { "literalString": "manual_test" } }
              ]
            }
          }
        }
      },
      {
        "id": "progress",
        "component": {
          "Progress": {
            "value": { "literalNumber": 60 },
            "max": { "literalNumber": 100 }
          }
        }
      }
    ]
  },
  "beginRendering": {
    "surfaceId": "main",
    "root": "root"
  }
}
```

### 数据模型测试消息

```javascript
{
  "dataModelUpdate": {
    "surfaceId": "main",
    "contents": [
      { "key": "user.name", "valueString": "测试用户" },
      { "key": "progress", "valueNumber": 80 }
    ]
  }
}
```

---

## 快速开始

### 1. 纯前端开发（推荐）

```bash
# 1. 启动开发服务器
npm run a2ui:react:dev

# 2. 打开浏览器访问
# http://localhost:18789

# 3. 打开浏览器开发者工具（F12）
# - 切换到移动设备模拟（Ctrl+Shift+M）
# - 选择 iPhone 12 Pro 或其他设备
# - 开始测试 UI 组件

# 4. 内置 Demo 会自动加载
# 可以看到按钮、文本、进度条等组件
```

### 2. 测试原生桥接

```bash
# 前置条件：需要原生 App 环境

# iOS 测试
cd apps/ios
# 用 Xcode 打开 OpenClaw.xcodeproj
# 选择模拟器或真机
# 点击运行按钮
# App 会自动加载 H5 页面
# 在 App 中测试按钮点击

# Android 测试
cd apps/android
# 运行模拟器或连接真机
./gradlew installDebug
# 在手机上打开 OpenClaw App
# 测试按钮点击
```

### 3. 构建

```bash
# 构建生产版本
npm run a2ui:react:build

# 输出位置
# src/dist/a2ui-react/
#   ├── index.html
#   └── assets/
#       ├── index-xxx.js
#       ├── index-xxx.css
#       ├── react-vendor-xxx.js
#       └── a2ui-core-xxx.js
```

---

## 开发流程建议

```
┌─────────────────────────────────────────────────────────────┐
│  开发阶段                                                    │
├─────────────────────────────────────────────────────────────┤
│  1. 纯 H5 开发（浏览器）                                      │
│     - npm run a2ui:react:dev                                │
│     - UI 调试、样式调整                                      │
│     - 单元测试：npm run a2ui:react:test                     │
│                                                              │
│  2. 构建                                                     │
│     - npm run a2ui:react:build                              │
│                                                              │
│  3. 集成测试（原生 App）                                      │
│     - 在 iOS/Android 模拟器中测试                            │
│     - 验证桥接通信                                           │
│     - 端到端测试                                             │
│                                                              │
│  4. 真机测试                                                 │
│     - 在真实设备上测试                                       │
│     - 测试不同屏幕尺寸                                       │
│     - 测试触摸响应                                           │
└─────────────────────────────────────────────────────────────┘
```

---

## 常见问题

### Q1: 浏览器中点击按钮没有反应？

**A**: 这是正常的！纯 H5 模式下会尝试 POST `/api/a2ui/action`，但该接口可能不存在。

**解决方案**：
- 打开浏览器开发者工具（F12）
- 切换到 Network 标签
- 点击按钮
- 会看到失败的 POST 请求（这是预期的）

### Q2: 如何测试桥接通信？

**A**: 需要在原生 App 环境中测试。

**步骤**：
1. 构建 H5 生产版本
2. 构建 OpenClaw iOS/Android App
3. 在模拟器或真机上运行 App
4. App 会加载 H5 页面
5. 点击按钮，观察原生代码日志

### Q3: 能否在浏览器中模拟桥接？

**A**: 可以！需要 mock 桥接对象。

```javascript
// 在浏览器控制台执行
window.openclawCanvasA2UIAction = {
  postMessage: (data) => {
    console.log('模拟桥接调用:', data);
  }
};

// 然后点击按钮，会在控制台看到日志
```

---

## 测试优先级说明

| 优先级 | 说明 | 必须测试 |
|--------|------|---------|
| **P0** | 核心功能 | ✅ 是 |
| **P1** | 重要功能 | ✅ 是 |
| **P2** | 次要功能 | ❌ 可选 |

### 推荐测试顺序

1. **纯 H5 模式**（浏览器）
   - TC-001 ~ TC-003: 页面加载
   - TC-201 ~ TC-263: 14 个组件渲染
   - TC-400 ~ TC-403: 主题系统
   - TC-500 ~ TC-504: 数据模型

2. **原生桥接模式**（需要 App）
   - TC-101 ~ TC-107: 桥接通信
   - TC-700 ~ TC-705: 用户动作

---

**文档版本**: v1.1
**创建日期**: 2025-02-04
**更新日期**: 2025-02-04
**更新内容**: 添加运行模式说明、快速开始指南、常见问题
